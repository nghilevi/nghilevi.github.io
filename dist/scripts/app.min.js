var autocomplete=angular.module("autocomplete",[]);autocomplete.directive("autocomplete",["$timeout",function(){var a=-1;return{restrict:"E",scope:{searchParam:"=ngModel",suggestions:"=data",onType:"=onType",onSelect:"=onSelect",autocompleteRequired:"="},controller:["$scope",function(a){a.selectedIndex=-1,a.initLock=!0,a.setIndex=function(b){a.selectedIndex=parseInt(b)},this.setIndex=function(b){a.setIndex(b),a.$apply()},a.getIndex=function(){return a.selectedIndex};var b=!0;a.completing=!1,a.$watch("searchParam",function(c,d){d===c||!d&&a.initLock||(b&&"undefined"!=typeof a.searchParam&&null!==a.searchParam&&(a.completing=!0,a.searchFilter=a.searchParam,a.selectedIndex=-1),a.onType&&a.onType(a.searchParam))}),this.preSelect=function(){b=!1,a.$apply(),b=!0},a.preSelect=this.preSelect,this.preSelectOff=function(){b=!0},a.preSelectOff=this.preSelectOff,a.select=function(c){c&&(a.searchParam=c,a.searchFilter=c,a.onSelect&&a.onSelect(c)),b=!1,a.completing=!1,setTimeout(function(){b=!0},1e3),a.setIndex(-1)}}],link:function(b,c,d){setTimeout(function(){b.initLock=!1,b.$apply()},250);var e="";b.attrs={placeholder:"start typing...","class":"",id:"",inputclass:"",inputid:""};for(var f in d)e=f.replace("attr","").toLowerCase(),0===f.indexOf("attr")&&(b.attrs[e]=d[f]);d.clickActivation&&(c[0].onclick=function(){b.searchParam||setTimeout(function(){b.completing=!0,b.$apply()},200)});var g={left:37,up:38,right:39,down:40,enter:13,esc:27,tab:9};document.addEventListener("keydown",function(a){var c=a.keyCode||a.which;switch(c){case g.esc:b.select(),b.setIndex(-1),b.$apply(),a.preventDefault()}},!0),document.addEventListener("blur",function(){setTimeout(function(){b.select(),b.setIndex(-1),b.$apply()},150)},!0),c[0].addEventListener("keydown",function(c){var d=c.keyCode||c.which,e=angular.element(this).find("li").length;if(b.completing&&0!=e)switch(d){case g.up:if(a=b.getIndex()-1,-1>a)a=e-1;else if(a>=e){a=-1,b.setIndex(a),b.preSelectOff();break}b.setIndex(a),-1!==a&&b.preSelect(angular.element(angular.element(this).find("li")[a]).text()),b.$apply();break;case g.down:if(a=b.getIndex()+1,-1>a)a=e-1;else if(a>=e){a=-1,b.setIndex(a),b.preSelectOff(),b.$apply();break}b.setIndex(a),-1!==a&&b.preSelect(angular.element(angular.element(this).find("li")[a]).text());break;case g.left:break;case g.right:case g.enter:case g.tab:a=b.getIndex(),-1!==a?(b.select(angular.element(angular.element(this).find("li")[a]).text()),d==g.enter&&c.preventDefault()):d==g.enter&&b.select(),b.setIndex(-1),b.$apply();break;case g.esc:b.select(),b.setIndex(-1),b.$apply(),c.preventDefault();break;default:return}})},template:'        <div class="autocomplete {{ attrs.class }}" id="{{ attrs.id }}">          <input            type="text"            ng-model="searchParam"            placeholder="{{ attrs.placeholder }}"            class="{{ attrs.inputclass }}"            id="{{ attrs.inputid }}"            ng-required="{{ autocompleteRequired }}" />          <ul ng-show="completing && (suggestions | filter:searchFilter).length > 0">            <li              suggestion              ng-repeat="suggestion in suggestions | filter:searchFilter | orderBy:\'toString()\' track by $index"              index="{{ $index }}"              val="{{ suggestion }}"              ng-class="{ active: ($index === selectedIndex) }"              ng-click="select(suggestion)"              ng-bind-html="suggestion | highlight:searchParam"></li>          </ul>        </div>'}}]),autocomplete.filter("highlight",["$sce",function(a){return function(b,c){if("function"==typeof b)return"";if(c){var d="("+c.split(/\ /).join(" |")+"|"+c.split(/\ /).join("|")+")",e=new RegExp(d,"gi");d.length&&(b=b.replace(e,'<span class="highlight">$1</span>'))}return a.trustAsHtml(b)}}]),autocomplete.directive("suggestion",function(){return{restrict:"A",require:"^autocomplete",link:function(a,b,c,d){b.bind("mouseenter",function(){d.preSelect(c.val),d.setIndex(c.index)}),b.bind("mouseleave",function(){d.preSelectOff()})}}});var app=angular.module("vinhnghigithubioApp",["ngAnimate","ngResource","ngRoute","autocomplete"]);app.config(["$routeProvider",function(a){a.when("/about-me",{templateUrl:"dev/views/about-me.html",controller:"about-me"}).when("/my-work",{templateUrl:"dev/views/my-work.html",controller:"my-work"}).otherwise({redirectTo:"/about-me"})}]),app.controller("menuLink",["$scope","$location",function(a,b){$("#menu").click(function(){$("html,body").scrollTop(0)}),a.location=b,a.$watch("location.path()",function(){"/my-work"==a.location.path()?(a.menuLink="#about-me",a.menuText="About Me"):(a.menuLink="#my-work",a.menuText="My Work")})}]),app.controller("about-me",["$scope",function(){skrollr.init();$("#avt").click(function(){$("html, body").animate({scrollTop:310},400)}),$("#avt").hover(function(){$("#intro h1, #intro p").addClass("moving")},function(){$("#intro h1, #intro p").removeClass("moving")}),$(window).scroll(function(){$(this).scrollTop()>260?$("#slide-1 #intro").fadeOut():$("#slide-1 #intro").fadeIn(),$(this).scrollTop()>=300&&$(this).scrollTop()<800?$("#slide-2 .caption.part1").fadeIn():$("#slide-2 .caption.part1").fadeOut(),$(this).scrollTop()>=800&&$(this).scrollTop()<1300?$("#slide-2 .caption.part2").fadeIn():$("#slide-2 .caption.part2").fadeOut(),$(this).scrollTop()>1450&&$(this).scrollTop()<2300?$("#slide-3 .caption").fadeIn():$("#slide-3 .caption").fadeOut()})}]),app.controller("my-work",["$scope","$http",function(a,b){var c=function(a){var b=[],c=a.reduce(function(a,b){return"undefined"==typeof a[b]?a[b]=1:a[b]+=1,a},{});for(var d in c)c.hasOwnProperty(d)&&b.push(d+" ("+c[d]+")");return b},d=function(b){for(var d=[],e=[],f=[],g=0;g<b.length;g++)d.push(b[g].name),e=e.concat(b[g].cat.split(", ")),f=f.concat(b[g].technologies.split(", "));e=c(e),f=c(f),a.autocomplete=d.concat(e,f)},e=function(b){a.projects=b,a.searchOrder=["rankId","-rating","name"],d(b)},f=JSON.parse(localStorage.getItem("lvnPortfolio1.0.10")),g="production";a.autocomplete=[];var h=function(c,d){"test"!=d?c?e(c):b.get("dist/models/data.json").success(function(b){e(b),c=JSON.stringify(a.projects),localStorage.clear(),localStorage.setItem("lvnPortfolio1.0.10",c)}):b.get("dev/models/data.json").success(function(b){e(b),c=JSON.stringify(a.projects)})};h(f,g),a.flip=function(a){$(a.currentTarget).toggleClass("flipped")},a.selectItem=function(b){")"==b[b.length-1]&&(a.query=b.slice(0,b.indexOf("(")-1))},$("#back-to-top").hide(),$(window).scroll(function(){$(this).scrollTop()>1e3?$("#back-to-top").fadeIn():$("#back-to-top").fadeOut()}),$("#back-to-top").click(function(){console.log("click to top"),$("html,body").scrollTop(0)})}]);